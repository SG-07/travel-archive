<% layout('/layout/boilerplate') %>
<div class="container">
    <div class="row">
        
        <div class="col-8 offset-3">
            <br>
            <h3>Listing Details:-</h3>
        </div>    
        <div class="card col-6 offset-3">
            <img src="<%= listing.image %>" class="card-img-top show-img" alt="listing_image">
            <div class="card-body">
                <p class="card-text"><strong><%= listing.title %></strong></p>
                <%= listing.description %>
                <br>
                Price: <%= listing.price.toLocaleString('en-IN', { style: 'currency', currency: 'INR' }) %>
                <br>
                <%= listing.location %>
                <br>
                <%= listing.country %>
            </div>
        </div>

        <div class="btn-show offset-3">
            <a href="/listings/<%= listing._id %>/edit" class="btn btn-primary col-1 offset-2">Edit</a>

            <!-- Delete Button that Triggers Modal -->
            <button class="btn btn-danger col-1" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>
        </div>
    </div>       
</div> <!-- âœ… Closing container div properly -->

 

<!-- Bootstrap Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm Deletion</h5>
                <button type="button" class="btn-close " data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this listing?
            </div>
            <div class="modal-footer">
                
                <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE">
                    <button type="submit" class="btn btn-danger">Yes, Delete</button>
                </form>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
